<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jineddy.system.mapper.cd.CdMapper">

<!-- !!!!! -->
<!-- 1. 건수 조회 -->
<!-- !!!!! -->
<!-- 목록 조회 : props -->
	<select id="selectCountAll" parameterType="kr.co.jineddy.system.service.cd.dto.SysCdInternalDto" resultType="Long">
		/* system.mapper.cd.CdMapper.selectCountAll */
		SELECT
			COUNT(*) AS CNT
		FROM sys_cd_mst A
		INNER JOIN sys_cd_group_mst B ON A.group_id = B.group_id
	</select>
	
	
	
<!-- !!!!! -->
<!-- 2. 목록 조회 -->
<!-- !!!!! -->
<!-- 목록 조회 : props -->
	<select id="selectPageAll" parameterType="kr.co.jineddy.system.service.cd.dto.SysCdInternalDto" resultType="kr.co.jineddy.system.api.cd.dto.CdResponseDto">
		/* system.mapper.cd.CdMapper.selectPageAll */
			SELECT
				A.group_id
				, A.cd_id
				, A.cd_nm
				, A.sort_ordr
				, A.use_yn
				, A.rm
				, A.ins_dt
				, A.ins_id
				, A.upd_dt
				, A.upd_id
			FROM sys_cd_mst A
			INNER JOIN sys_cd_group_mst B ON A.group_id = B.group_id
			WHERE 1 = 1
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( groupId )'>
			AND A.group_id LIKE CONCAT('%', #{groupId}, '%')
		</if>
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( cdId )'>
			AND A.cd_id LIKE CONCAT('%', #{cdId}, '%')
		</if>
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( useYn )'>
			AND A.use_yn = #{useYn}
		</if>
			ORDER BY A.group_id ASC, A.sort_ordr DESC
			LIMIT #{pageSize}
			OFFSET #{offset}
	</select>
	
	
	
<!-- !!!!! -->
<!-- 3. 단건 조회 -->
<!-- !!!!! -->
	
	
	
</mapper>