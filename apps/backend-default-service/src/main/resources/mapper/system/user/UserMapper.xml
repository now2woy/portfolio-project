<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jineddy.system.mapper.user.UserMapper">

<!-- !!!!! -->
<!-- 1. 건수 조회 -->
<!-- !!!!! -->
	
	
	
<!-- !!!!! -->
<!-- 2. 목록 조회 -->
<!-- !!!!! -->
<!-- 목록 조회 : props -->
	<select id="selectTokenIssuedCountList" resultType="kr.co.jineddy.system.api.user.dto.UserResponseDto">
		/* kr.co.jineddy.system.mapper.user.UserMapper.selectTokenIssuedCountList */
			SELECT
				DATE(A.issued_de) AS issued_de
				, COALESCE( COUNT( B.issued_dt ), 0) AS daily_count
			FROM
				GENERATE_SERIES ( ( NOW() - INTERVAL '6 days' )::date, NOW()::date, '1 day' ) AS A( issued_de )
			LEFT JOIN
				sys_user_tkn AS B ON DATE( B.issued_dt ) = A.issued_de
			GROUP BY
				A.issued_de
			ORDER BY
				A.issued_de ASC
	</select>
	
	
	
<!-- !!!!! -->
<!-- 3. 단건 조회 -->
<!-- !!!!! -->
	
	
	
</mapper>