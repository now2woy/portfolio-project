<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jineddy.board.mapper.BrdPostMapper">

<!-- !!!!! -->
<!-- 1. 건수 조회 -->
<!-- !!!!! -->
<!-- 목록 조회 : 게시판 설정 -->
	<select id="selectCountAll" parameterType="kr.co.jineddy.board.service.dto.BrdPostInternalDto" resultType="Long">
		/* kr.co.jineddy.board.mapper.BrdPostMapper.selectCountAll */
			SELECT
				COUNT(*) AS CNT
			FROM brd_post_mst A
			WHERE 1 = 1
			AND A.brd_id = #{brdId}
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( postTtl )'>
			AND A.post_ttl LIKE CONCAT('%', #{postTtl}, '%')
		</if>
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( postCtt )'>
			AND A.post_ctt LIKE CONCAT('%', #{postCtt}, '%')
		</if>
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( writerId )'>
			AND A.writer_id = #{writerId}
		</if>
	</select>
	
	
	
<!-- !!!!! -->
<!-- 2. 목록 조회 -->
<!-- !!!!! -->
<!-- 목록 조회 : 게시판 설정 -->
	<select id="selectPageAll" parameterType="kr.co.jineddy.board.service.dto.BrdPostInternalDto" resultType="kr.co.jineddy.board.api.dto.BrdPostResponseDto">
		/* kr.co.jineddy.board.mapper.BrdPostMapper.selectPageAll */
			SELECT
				A.post_id
				, A.brd_id
				, A.post_ttl
				, A.post_ctt
				, A.writer_id
				, A.view_cnt
				, A.atch_file_id
				, A.del_yn
				, A.del_dt
				, A.ins_dt
				, A.ins_id
				, A.upd_dt
				, A.upd_id
			FROM brd_post_mst A
			WHERE 1 = 1
			AND A.brd_id = #{brdId}
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( postTtl )'>
			AND A.post_ttl LIKE CONCAT('%', #{postTtl}, '%')
		</if>
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( postCtt )'>
			AND A.post_ctt LIKE CONCAT('%', #{postCtt}, '%')
		</if>
		<if test='@org.apache.commons.lang3.StringUtils@isNotEmpty( writerId )'>
			AND A.writer_id = #{writerId}
		</if>
			ORDER BY A.upd_dt DESC
			LIMIT #{pageSize}
			OFFSET #{offset}
	</select>
	
	
	
<!-- !!!!! -->
<!-- 3. 단건 조회 -->
<!-- !!!!! -->
	
	
	
</mapper>